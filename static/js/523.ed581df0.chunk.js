"use strict";(self.webpackChunkelectron_app=self.webpackChunkelectron_app||[]).push([[523],{8523:function(e,t,i){i.r(t),i.d(t,{default:function(){return x}});var o=i(2791),n=i(7760),s=i(3566),a=i(5517),r=i(3144),h=i(5671),d=new n.Pa4,c=new n.$V,m=new n.Pa4,w=(0,r.Z)((function e(t,i){(0,h.Z)(this,e),this.object=t,this.domElement=i,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.mouseDragOn=!1,this.autoSpeedFactor=0,this.pointerX=0,this.pointerY=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.viewHalfX=0,this.viewHalfY=0;var o=0,s=0;this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onPointerDown=function(e){if(this.domElement!==document&&this.domElement.focus(),this.activeLook)switch(e.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0}this.mouseDragOn=!0},this.onPointerUp=function(e){if(this.activeLook)switch(e.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1}this.mouseDragOn=!1},this.onPointerMove=function(e){this.domElement===document?(this.pointerX=e.pageX-this.viewHalfX,this.pointerY=e.pageY-this.viewHalfY):(this.pointerX=e.pageX-this.domElement.offsetLeft-this.viewHalfX,this.pointerY=e.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(e){switch(e.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0}},this.onKeyUp=function(e){switch(e.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1}},this.lookAt=function(e,t,i){return e.isVector3?m.copy(e):m.set(e,t,i),this.object.lookAt(m),u(this),this},this.update=function(){var e=new n.Pa4;return function(t){if(!1!==this.enabled){if(this.heightSpeed){var i=n.M8C.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=t*(i*this.heightCoef)}else this.autoSpeedFactor=0;var a=t*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(a+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(a),this.moveLeft&&this.object.translateX(-a),this.moveRight&&this.object.translateX(a),this.moveUp&&this.object.translateY(a),this.moveDown&&this.object.translateY(-a);var r=t*this.lookSpeed;this.activeLook||(r=0);var h=1;this.constrainVertical&&(h=Math.PI/(this.verticalMax-this.verticalMin)),s-=this.pointerX*r,this.lookVertical&&(o-=this.pointerY*r*h),o=Math.max(-85,Math.min(85,o));var d=n.M8C.degToRad(90-o),c=n.M8C.degToRad(s);this.constrainVertical&&(d=n.M8C.mapLinear(d,0,Math.PI,this.verticalMin,this.verticalMax));var m=this.object.position;e.setFromSphericalCoords(1,d,c).add(m),this.object.lookAt(e)}}}(),this.dispose=function(){this.domElement.removeEventListener("contextmenu",v),this.domElement.removeEventListener("pointerdown",r),this.domElement.removeEventListener("pointermove",a),this.domElement.removeEventListener("pointerup",w),window.removeEventListener("keydown",l),window.removeEventListener("keyup",p)};var a=this.onPointerMove.bind(this),r=this.onPointerDown.bind(this),w=this.onPointerUp.bind(this),l=this.onKeyDown.bind(this),p=this.onKeyUp.bind(this);function u(e){var t=e.object.quaternion;d.set(0,0,-1).applyQuaternion(t),c.setFromVector3(d),o=90-n.M8C.radToDeg(c.phi),s=n.M8C.radToDeg(c.theta)}this.domElement.addEventListener("contextmenu",v),this.domElement.addEventListener("pointerdown",r),this.domElement.addEventListener("pointermove",a),this.domElement.addEventListener("pointerup",w),window.addEventListener("keydown",l),window.addEventListener("keyup",p),this.handleResize(),u(this)}));function v(e){e.preventDefault()}var l,p,u,f,b,k,g=i(184),M=function(){k.clear(),k.render(u,p)},E=new n.SUY,y=function e(){M(),b.update(E.getDelta()),requestAnimationFrame(e)},L=function(){p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix(),k.setSize(window.innerWidth,window.innerHeight),M()},j=new n.Pa4,P=new n.Ilk,S=function(){(u=new n.xsS).background=(new n.cBK).setPath("textures/cubeMaps/").load(["right.jpeg","left.jpeg","top.jpeg","bottom.jpeg","front.jpeg","back.jpeg"]),(p=new n.cPb(75,window.innerWidth/window.innerHeight,1,1e3)).position.set(-100,10,50),(f=new n.vmT(15658751,7829384,.75)).position.set(.5,1,.75),u.add(f),(b=new w(p,l)).lookSpeed=.1,b.movementSpeed=50,b.lookVertical=!1,function(){(new s.v).load("models/city.mtl",(function(e){var t=new a.L;t.setMaterials(e),t.load("models/city.obj",(function(e){e.position.y=-10,e.scale.set(10,10,10),u.add(e)}))}));var e=new n._12(5e3,5e3,100,100);e.rotateX(-Math.PI/2);for(var t=e.attributes.position,i=0,o=t.count;i<o;i++)j.fromBufferAttribute(t,i),j.x+=20*Math.random()-10,j.y+=2*Math.random(),j.z+=20*Math.random()-10,t.setXYZ(i,j.x,j.y,j.z);for(var r=[],h=0,d=(t=(e=e.toNonIndexed()).attributes.position).count;h<d;h++)P.setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75),r.push(P.r,P.g,P.b);e.setAttribute("color",new n.a$l(r,3));var c=new n.vBJ({vertexColors:!0}),m=new n.Kj0(e,c);u.add(m)}(),(k=new n.CP7({antialias:!0})).setPixelRatio(window.devicePixelRatio),k.setSize(window.innerWidth,window.innerHeight),k.sortObjects=!1,l.appendChild(k.domElement),y(),window.onresize=L},x=function(){var e=(0,o.useRef)(null);return(0,o.useEffect)((function(){return l=e.current,S(),function(){l.innerHTML=""}}),[]),(0,g.jsx)("div",{ref:e})}}}]);
//# sourceMappingURL=523.ed581df0.chunk.js.map