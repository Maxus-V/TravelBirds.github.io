"use strict";(self.webpackChunkelectron_app=self.webpackChunkelectron_app||[]).push([[256],{3256:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var o,r,i,a,s,c,d,w,l,u,p,f,h=t(2791),y=t(7760),m=t(3544),v=t(6668),b=t(3566),x=t(5517),M=t(184),g=[],k=!1,P=!1,j=!1,A=!1,z=!1,L=(new y.iMs(new y.Pa4,new y.Pa4(0,1,0),0,10),new y.iMs(new y.Pa4,new y.Pa4,0,10),new y.iMs(new y.Pa4,new y.Pa4(0,-1,0),0,10),performance.now()),S=new y.Pa4,R=new y.Pa4,E=new y.Pa4,I=new y.Ilk,K=function(e,n){u=new y.Xcj(e),p={};for(var t=0;t<n.length;t++){var o=n[t],r=u.clipAction(o);p[o.name]=r}(f=p.Idle).play()},C=function(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)},H=function e(){var n=l.getDelta();u&&u.update(n),requestAnimationFrame(e);var t=performance.now();if(!0===a.isLocked){w.ray.origin.copy(a.getObject().position),w.ray.origin.y-=10;var s=w.intersectObjects(g,!1).length>0,c=(t-L)/1e3;if(S.x-=10*S.x*c,S.z-=10*S.z*c,S.y-=9.8*100*c,R.z=Number(k)-Number(P),R.x=Number(A)-Number(j),R.normalize(),k||P){if((f=p.Running).play(),S.z-=400*R.z*c,!d)return;d.position.z-=40*R.z*c}else if(j||A){if((f=p.Running).play(),d.rotation.y=Math.PI/2*R.x,S.x-=400*R.x*c,!d)return;d.position.x-=-1*R.x*40*c}else f.stop(),d.rotation.y=Math.PI,(f=p.Idle).play();!0===s&&(S.y=Math.max(0,S.y),z=!0),a.moveRight(-S.x*c),a.moveForward(-S.z*c),a.getObject().position.y+=S.y*c,a.getObject().position.y<10&&(S.y=0,a.getObject().position.y=10,z=!0)}L=t,i.render(r,o)},N=function(){var e=(0,h.useRef)(null),n=(0,h.useRef)(null),t=(0,h.useRef)(null);return(0,h.useEffect)((function(){return s=e.current,c=n.current,t.current,function(){l=new y.SUY,(o=new y.cPb(75,window.innerWidth/window.innerHeight,1,1e3)).position.y=10,(r=new y.xsS).background=new y.Ilk(16777215),r.fog=new y.ybr(16777215,0,750);var e=new y.vmT(15658751,7829384,.75);e.position.set(.5,1,.75),r.add(e),(new b.v).load("models/city.mtl",(function(e){var n=new x.L;n.setMaterials(e),n.load("models/city.obj",(function(e){e.position.y=-10,e.scale.set(10,10,10),r.add(e)}))})),(new v.E).load("models/RobotExpressive.glb",(function(e){(d=e.scene).position.y=1,d.position.z=-15,d.scale.set(2,2,2),d.rotation.y=Math.PI,r.add(d),K(d,e.animations)}),void 0,(function(e){console.error(e)})),(a=new m.q(o,s)).addEventListener("lock",(function(){c.style.display="none"})),a.addEventListener("unlock",(function(){c.style.display="block"})),r.add(a.getObject()),document.addEventListener("keydown",(function(e){switch(e.code){case"ArrowUp":case"KeyW":k=!0;break;case"ArrowLeft":case"KeyA":j=!0;break;case"ArrowDown":case"KeyS":P=!0;break;case"ArrowRight":case"KeyD":A=!0;break;case"Space":!0===z&&(S.y+=350),z=!1}})),document.addEventListener("keyup",(function(e){switch(e.code){case"ArrowUp":case"KeyW":k=!1;break;case"ArrowLeft":case"KeyA":j=!1;break;case"ArrowDown":case"KeyS":P=!1;break;case"ArrowRight":case"KeyD":A=!1}})),w=new y.iMs(new y.Pa4,new y.Pa4(0,-1,0),0,10);var n=new y._12(2e3,2e3,100,100);n.rotateX(-Math.PI/2);for(var t=n.attributes.position,u=0,p=t.count;u<p;u++)E.fromBufferAttribute(t,u),E.x+=20*Math.random()-10,E.y+=2*Math.random(),E.z+=20*Math.random()-10,t.setXYZ(u,E.x,E.y,E.z);for(var f=[],h=0,M=(t=(n=n.toNonIndexed()).attributes.position).count;h<M;h++)I.setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75),f.push(I.r,I.g,I.b);n.setAttribute("color",new y.a$l(f,3));var L=new y.vBJ({vertexColors:!0}),R=new y.Kj0(n,L);r.add(R);for(var N=new y.DvJ(20,20,20).toNonIndexed(),D=[],O=0,W=(t=N.attributes.position).count;O<W;O++)I.setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75),D.push(I.r,I.g,I.b);N.setAttribute("color",new y.a$l(D,3));for(var U=0;U<500;U++){var J=new y.xoR({specular:16777215,flatShading:!0,vertexColors:!0});J.color.setHSL(.2*Math.random()+.5,.75,.25*Math.random()+.75);var X=new y.Kj0(N,J);X.position.x=20*Math.floor(20*Math.random()-10),X.position.y=20*Math.floor(20*Math.random())+10,X.position.z=20*Math.floor(20*Math.random()-10),g.push(X)}(i=new y.CP7).setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),s.appendChild(i.domElement),window.addEventListener("resize",C),H()}(),function(){s.innerHTML=""}}),[]),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{ref:n,className:"blocker",children:(0,M.jsxs)("div",{ref:t,className:"instructions",onClick:function(){return a.lock()},children:[(0,M.jsx)("h1",{children:"Click to play"}),(0,M.jsxs)("p",{children:["Move: WASD",(0,M.jsx)("br",{}),"Jump: SPACE",(0,M.jsx)("br",{}),"Look: MOUSE"]})]})}),(0,M.jsx)("div",{ref:e})]})}}}]);
//# sourceMappingURL=256.f2a18d20.chunk.js.map